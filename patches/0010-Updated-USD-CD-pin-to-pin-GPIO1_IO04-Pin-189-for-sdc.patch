From ae1149e6b090d6f8642ac33d73af3d72f157d624 Mon Sep 17 00:00:00 2001
From: keyur-mpc <keyur@mpconsultants.org>
Date: Thu, 10 Aug 2023 16:47:02 +0000
Subject: [PATCH 10/14] Updated USD CD pin to pin GPIO1_IO04 (Pin 189) for
 sdcard dts

---
 ...ll-var-som-concerto-board-emmc-sd-card.dts | 23 +++++++++++++++++++
 1 file changed, 23 insertions(+)

diff --git a/arch/arm/boot/dts/imx6ull-var-som-concerto-board-emmc-sd-card.dts b/arch/arm/boot/dts/imx6ull-var-som-concerto-board-emmc-sd-card.dts
index dcf036d532dc..24562c37fed3 100644
--- a/arch/arm/boot/dts/imx6ull-var-som-concerto-board-emmc-sd-card.dts
+++ b/arch/arm/boot/dts/imx6ull-var-som-concerto-board-emmc-sd-card.dts
@@ -19,4 +19,27 @@
 / {
 	model = "Variscite VAR-SOM-6UL with i.MX6ULL, eMMC & SD card support on Concerto-Board";
 	compatible = "variscite,imx6ul-var-som", "fsl,imx6ull";
+
+	/* Deleting this node to avoid conflict with GPIO1_IO04 for SD card CD pin */
+	/delete-node/ pinctrl_tsc;
+	/delete-node/ tsc;
+};
+
+
+&iomuxc {
+	/* Using Pin 189 */
+	pinctrl_usdhc1_gpio: usdhc1_gpiogrp {
+		fsl,pins = <
+			MX6UL_PAD_GPIO1_IO04__GPIO1_IO04	0x1b0b1 /* CD */
+		>;
+	};
+};
+
+/* Disabled to avoid conflicts with GPIO1_IO04 */
+&tsc {
+    status = "disabled";
+};
+
+&usdhc1 {
+	cd-gpios = <&gpio1 4 GPIO_ACTIVE_LOW>;
 };
-- 
2.25.1

